<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>AR Editor</title>

<style>
body {
  font-family: sans-serif;
  padding: 20px;
}

/* 横並びプレビュー */
#previewArea {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 30px;
  height: 200px;
  border: 2px dashed #ccc;
}

.previewImg {
  margin: 0 10px;
  transition: 0.3s;
}

.small {
  width: 100px;
  transform: scale(0.7);
  opacity: 0.7;
}

.large {
  width: 150px;
  transform: scale(1.1);
}

button {
  margin-top: 20px;
  padding: 10px 20px;
}
</style>
</head>

<body>

<h2>画像を3枚選択してください</h2>

<input type="file" id="fileInput" accept="image/*" multiple>

<div id="previewArea"></div>

<button id="saveBtn">3枚まとめて保存</button>

<br><br>
<a href="index.html">ARページへ戻る</a>

<script>
const fileInput = document.getElementById("fileInput");
const previewArea = document.getElementById("previewArea");

let imagesBase64 = [];

fileInput.addEventListener("change", (event) => {
  const files = event.target.files;

  if (files.length !== 3) {
    alert("必ず3枚選択してください");
    fileInput.value = "";
    previewArea.innerHTML = "";
    return;
  }

  imagesBase64 = [];
  previewArea.innerHTML = "";

  Array.from(files).forEach((file, index) => {
    const reader = new FileReader();

    reader.onload = function(e) {
      imagesBase64.push(e.target.result);

      const img = document.createElement("img");
      img.src = e.target.result;
      img.classList.add("previewImg");

      if (index === 1) {
        img.classList.add("large");
      } else {
        img.classList.add("small");
      }

      previewArea.appendChild(img);
    };

    reader.readAsDataURL(file);
  });
});

// 保存
document.getElementById("saveBtn").addEventListener("click", () => {
  if (imagesBase64.length !== 3) {
    alert("3枚選択してください");
    return;
  }

  localStorage.setItem("arImages", JSON.stringify(imagesBase64));
  alert("保存しました！");
});
</script>

</body>
</html>
